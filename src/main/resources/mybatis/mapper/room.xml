<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper 
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd" >

<mapper namespace="com.tp.yogioteur.mapper.RoomMapper">

	<resultMap type="ImageDTO" id="ImageMap">
		<id column="IMAGE_NO" property="imageNo"/>
		<result column="ROOM_NO" property="roomNo"/>
		<result column="IMAGE_PATH" property="imagePath"/>
		<result column="IMAGE_SAVED" property="imageSaved"/>
		<result column="IMAGE_ORIGIN" property="imageOrigin"/>
	</resultMap>
	
	<resultMap type="RoomTypeDTO" id="RoomTypeMap">
		<id column="RT_NO" property="rtNo"/>
		<result column="RT_TYPE" property="rtType"/>
		<result column="RT_MAX" property="rtMax"/>
	</resultMap>
	
	<resultMap type="RoomDTO" id="RoomDTOMap">
		<id column="ROOM_NO" property="roomNo"/>
		<result column="RT_NO" property="rtNo"/>
		<result column="ROOM_NAME" property="roomName"/>
		<result column="ROOM_PRICE" property="roomPrice"/>
		<result column="ROOM_STATUS" property="roomStatus"/>
		<result column="ROOM_CHECKIN" property="roomCheckIn"/>
		<result column="ROOM_CHECKOUT" property="roomCheckOut"/>
		<collection property="roomTypeDTO" resultMap="RoomTypeMap"/>
		<collection property="imageDTO" resultMap="ImageMap"/>
	</resultMap>
	
	<select id="checkInRoomList" resultMap="RoomDTOMap">
		SELECT I.IMAGE_PATH, R.ROOM_NAME, R.ROOM_PRICE
		  FROM ROOM R INNER JOIN IMAGE I
		    ON R.ROOM_NO = I.ROOM_NO
	 	  <![CDATA[
		 WHERE ROOM_CHECKIN >= '1900-01-01'
		   AND ROOM_CHECKOUT < '9999-12-31'
		  ]]> 
	</select>
	
	
</mapper>